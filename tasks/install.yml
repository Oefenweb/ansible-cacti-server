# tasks file for cacti-server
---
- name: install | create dbconfig-common directory
  file:
    path: /etc/dbconfig-common
    state: directory
    owner: root
    group: root
    mode: 0755
  tags: [cacti-server-configure-create-dbconfig-common-directory]

- name: install | update dbconfig-common file
  template:
    src: etc/dbconfig-common/cacti.conf.j2
    dest: /etc/dbconfig-common/cacti.conf
    owner: root
    group: root
    mode: 0600
  tags: [cacti-server-configure-update-dbconfig-common-file]

- name: install | configure debconf
  debconf:
    name: "{{ item.name }}"
    question: "{{ item.question }}"
    value: "{{ item.value }}"
    vtype: "{{ item.vtype }}"
  with_items: cacti_server_debconf_selections
  changed_when: false
  tags: [cacti-server-install-configure debconf]

- name: install | dependencies
  apt:
    name: "{{ item }}"
    state: latest
  with_items: cacti_server_dependencies
  tags:
    - cacti-server-install-dependencies

- name: install | additional
  apt:
    name: "{{ item }}"
    state: latest
  with_items: cacti_server_install
  tags:
    - cacti-server-install-additional
